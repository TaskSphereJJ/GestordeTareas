@model List<GestordeTaras.EN.Comment>
@using System.Security.Claims
@{
    ViewData["Title"] = "Comentarios del Proyecto";
    var userId = int.Parse(User.FindFirst(ClaimTypes.NameIdentifier).Value);
}

<div class="chat-container">
    <!-- Encabezado del chat -->
    <div class="chat-header">
        <h2>Comentarios del Proyecto</h2>
        <p>Última actividad: @DateTime.Now.ToString("dd-MM-yyyy")</p>
    </div>

    <!-- Contenedor de mensajes -->
    <div class="chat-messages">
        @foreach (var comentario in Model)
        {
            <div class="chat-message @((comentario.IdUsuario == userId) ? "sent" : "received")">
                <!-- Foto de perfil siempre visible -->
                <img src="@comentario.Usuario.FotoPerfil" alt="Foto de perfil" class="profile-pic">

                <!-- Contenido del mensaje -->
                <div class="message-content">
                    <div class="message-header">
                        <p class="user-name">@comentario.Usuario.Nombre @comentario.Usuario.Apellido</p>
                        <p class="timestamp">@comentario.FechaComentario.ToString("hh:mm tt")</p>
                    </div>
                    <p class="message-text">@comentario.Content</p>
                </div>
            </div>
        }
    </div>

    <!-- Campo para escribir mensajes -->
    <div class="chat-input-container">
        <form asp-action="Create" method="post" class="chat-form">
            <input type="hidden" name="idProyecto" value="@ViewBag.IdProyecto" />
            <textarea name="contenido" class="chat-input" placeholder="Escribe tu mensaje..."></textarea>
            <button type="submit" class="send-btn">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white" width="24px" height="24px">
                    <path d="M4 21V15L18.66 12L4 9V3L22 12L4 21Z" />
                </svg>
            </button>
        </form>
    </div>
</div>


<script type="text/javascript">
    function confirmDelete() {
        return confirm("¿Estás seguro de que deseas eliminar este comentario?");
    }
</script>
